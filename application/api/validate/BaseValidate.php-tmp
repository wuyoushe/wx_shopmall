<?php
namespace app\api\validate;

use app\api\service\Token;
use app\lib\enum\ScopeEnum;
use app\lib\exception\ForbiddenException;
use app\lib\exception\ParameterException;
use app\lib\exception\TokenException;
use think\Request;
use think\Validate;

class BaseValidate extends Validate {
	public function goCheck() {
		//获取所有的传递的参数
		$request = Request::instance();
		$params  = $request->param();
		$result = $this->check();
		if (!$result) {
			$error = $this->error();
			//抛出一个全局异常
			throw new Exception($error);
		} else {
			return true;
		}
	}

	public function isPositiveInteger($value, $rule='', $data='', $field='')
	{
		if (is_numeric($value) && is_int($value + 0) && ($value + 0) > 0){
			return true;
		}
		return $field . '必须是整数'；
	}
}